{namespace pdc=Netcreators\NcgovPdc\ViewHelpers}
{namespace lib=Netcreators\NcExtbaseLib\ViewHelpers}

<f:if condition="{product}">
<f:then>

<h1><pdc:faqContent><f:format.html>{product.name}</f:format.html></pdc:faqContent></h1>

<lib:tabControl>
<lib:tabControl.tab condition="{product.shortDescription}" label="{f:translate(key:'product_detail_description', default:'Beschrijving')}">
	<h2 class="pdc-subheader pdc-product pdc-tab-1"><f:translate key="product_detail_description">Beschrijving</f:translate></h2>
	<div class="pdc-content pdc-product pdc-detail-fulldescription">
		<f:if condition="{product.image}">
			<div class="pdc-product-detail-image"><f:image src="{product.image}" maxWidth="{maxWidth}" maxHeight="{maxHeight}" alt="Product image" /></div>
		</f:if>
		<f:format.html parseFuncTSPath=""><lib:replaceContent searchExpression="{settings.replaceContent.headers.searchExpression}" wrapOrReplace="{settings.replaceContent.headers.wrap}">{product.shortDescription}</lib:replaceContent></f:format.html>
	</div>
	<f:if condition="{product.referenceLaws}">
		<div class="pdc-subheader pdc-product pdc-detail-laws">
			<h3><f:translate key="product_detail_legislation">Wetgeving</f:translate></h3>
		</div>
		<ul class="pdc-content pdc-product pdc-product-detail-laws">
			<f:for each="{product.referenceLaws}" as="referenceLink">
				<f:if condition="{referenceLink.isValid}">
					<li><a class="pdc-link-law pdc-link" href="{referenceLink.linkUri}" title="{referenceLink.title}">{referenceLink.name}</a></li>
				</f:if>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.referenceExternal}">
		<div class="pdc-subheader pdc-product pdc-detail-external">
			<h3><f:translate key="product_detail_more_information">Meer informatie</f:translate></h3>
		</div>
		<ul class="pdc-content pdc-product pdc-product-detail-external">
			<f:for each="{product.referenceExternal}" as="referenceLink">
				<f:if condition="{referenceLink.isValid}">
					<li><a class="pdc-link-law pdc-link" href="{referenceLink.linkUri}" title="{referenceLink.title}">{referenceLink.name}</a></li>
				</f:if>
			</f:for>
		</ul>
	</f:if>
</lib:tabControl.tab>
<lib:tabControl.tab condition="{product.hasFullContactInfo}" label="{f:translate(key:'product_detail_for_whom', default:'Voor wie')}">
	<div class="pdc-content pdc-product pdc-product-detail-fullterms">
		<f:format.html parseFuncTSPath=""><lib:replaceContent searchExpression="{settings.replaceContent.headers.searchExpression}" wrapOrReplace="{settings.replaceContent.headers.wrap}">{product.fullContactInfo}</lib:replaceContent></f:format.html>
	</div>
</lib:tabControl.tab>
<f:comment>The label value condition for the following tabControl.tab can only be defined (and the label translated) as soon as the text of English products are known. Afterwards, please remove this f:comment.</f:comment>
<lib:tabControl.tab condition="{combinedProperties.apply}" label="{pdc:productContains(contains: 'afmelden', product: product, propertyName: 'fullRequiredForApplication', then: 'Af/aanmelden', else: 'Aanvragen')}">
	<div class="pdc-content pdc-product pdc-product-detail-fullrequiredforapplication">
		<f:format.html parseFuncTSPath=""><lib:replaceContent searchExpression="{settings.replaceContent.headers.searchExpression}" wrapOrReplace="{settings.replaceContent.headers.wrap}">{product.fullRequiredForApplication}</lib:replaceContent></f:format.html>
	</div>
	<f:if condition="{product.referenceForms}">
		<div class="pdc-subheader pdc-product pdc-detail-forms">
			<h3><f:translate key="product_detail_forms">Formulieren</f:translate></h3>
		</div>
		<ul class="pdc-content pdc-product pdc-product-detail-forms">
			<f:for each="{product.referenceForms}" as="referenceLink">
				<f:if condition="{referenceLink.isValid}">
					<li><a class="pdc-link-form pdc-link" href="{referenceLink.linkUri}" title="{referenceLink.title}">{referenceLink.name}</a></li>
				</f:if>
			</f:for>
		</ul>
	</f:if>
</lib:tabControl.tab>
<lib:tabControl.tab condition="{product.hasFullApplyInfo}" label="{f:translate(key:'product_detail_application_requirements', default:'Meenemen')}">
	<div class="pdc-content pdc-product pdc-product-detail-fullapplyinfo">
		<f:format.html parseFuncTSPath=""><lib:replaceContent searchExpression="{settings.replaceContent.headers.searchExpression}" wrapOrReplace="{settings.replaceContent.headers.wrap}">{product.fullApplyInfo}</lib:replaceContent></f:format.html>
	</div>
</lib:tabControl.tab>
<lib:tabControl.tab condition="{product.hasFullExtraInfo}" label="{f:translate(key:'product_detail_deadline', default:'Termijn')}">
	<div class="pdc-content pdc-product pdc-product-detail-fullapplyinfo">
		<f:format.html parseFuncTSPath=""><lib:replaceContent searchExpression="{settings.replaceContent.headers.searchExpression}" wrapOrReplace="{settings.replaceContent.headers.wrap}">{product.fullExtraInfo}</lib:replaceContent></f:format.html>
	</div>
</lib:tabControl.tab>
<lib:tabControl.tab condition="{product.hasFullTerms}" label="{f:translate(key:'product_detail_costs', default:'Kosten')}">
	<div class="pdc-content pdc-product pdc-product-detail-fullltemrs">
		<f:format.html parseFuncTSPath=""><lib:replaceContent searchExpression="{settings.replaceContent.headers.searchExpression}" wrapOrReplace="{settings.replaceContent.headers.wrap}">{product.fullTerms}</lib:replaceContent></f:format.html>
	</div>
</lib:tabControl.tab>
<lib:tabControl.tab condition="{combinedProperties.other}" label="{f:translate(key:'product_detail_extra_product_info', default:'Meer')}">
	<h2 class="pdc-subheader pdc-product pdc-tab-7"><f:translate key="product_detail_extra_product_info">Meer...</f:translate></h2>
	<f:if condition="{product.hasFullExtraInfo}">
		<div class="pdc-subheader pdc-product pdc-detail-background">
			<h3><f:translate key="product_detail_background">Achtergrond</f:translate></h3>
		</div>
		<div class="pdc-content pdc-product pdc-product-detail-fullextrainfo">
			<f:format.html parseFuncTSPath=""><lib:replaceContent searchExpression="{settings.replaceContent.headers.searchExpression}" wrapOrReplace="{settings.replaceContent.headers.wrap}">{product.fullExtraInfo}</lib:replaceContent></f:format.html>
		</div>
	</f:if>
	<f:if condition="{product.referenceExternal}">
		<div class="pdc-subheader pdc-product pdc-detail-external">
			<h3><f:translate key="product_detail_references">Verwijzingen</f:translate></h3>
		</div>
		<ul class="pdc-content pdc-product pdc-product-detail-external">
			<f:for each="{product.referenceExternal}" as="referenceLink">
				<f:if condition="{referenceLink.isValid}">
					<li><a class="pdc-link-law pdc-link" href="{referenceLink.linkUri}" title="{referenceLink.title}">{referenceLink.name}</a></li>
				</f:if>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.referenceLaws}">
		<div class="pdc-subheader pdc-product pdc-detail-laws">
			<h3><f:translate key="product_detail_national_laws">Landelijke wetten</f:translate></h3>
		</div>
		<ul class="pdc-content pdc-product pdc-product-detail-laws">
			<f:for each="{product.referenceLaws}" as="referenceLink">
				<f:if condition="{referenceLink.isValid}">
					<li><a class="pdc-link-law pdc-link" href="{referenceLink.linkUri}" title="{referenceLink.title}">{referenceLink.name}</a></li>
				</f:if>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.referenceLocalLaws}">
		<div class="pdc-subheader pdc-product pdc-detail-local-laws">
			<h3><f:translate key="product_detail_local_legislation">Lokale regelgeving</f:translate></h3>
		</div>
		<ul class="pdc-content pdc-product pdc-product-detail-local-laws">
			<f:for each="{product.referenceLocalLaws}" as="referenceLink">
				<f:if condition="{referenceLink.isValid}">
					<li><a class="pdc-link-local-law pdc-link" href="{referenceLink.linkUri}" title="{referenceLink.title}">{referenceLink.name}</a></li>
				</f:if>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.referenceForms}">
		<div class="pdc-subheader pdc-product pdc-detail-forms">
			<h3><f:translate key="product_detail_forms">Formulieren</f:translate></h3>
		</div>
		<ul class="pdc-content pdc-product pdc-product-detail-forms">
			<f:for each="{product.referenceForms}" as="referenceLink">
				<f:if condition="{referenceLink.isValid}">
					<li><a class="pdc-link-form pdc-link" href="{referenceLink.linkUri}" title="{referenceLink.title}">{referenceLink.name}</a></li>
				</f:if>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.attachments}">
		<div class="pdc-subheader pdc-product pdc-detail-attachments">
			<h3><f:translate key="product_detail_attachments">Bijlagen</f:translate></h3>
		</div>
		<ul class="pdc-content pdc-product pdc-product-detail-attachments">
			<f:for each="{product.attachments}" as="attachment">
				<li>
					<a class="pdc-link-attachment pdc-link" href="{attachment.url}">{attachment.name}</a>
				</li>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.requestForm}">
		<div class="pdc-subheader pdc-product pdc-product-detail-requestform">
			<h3><f:translate key="product_detail_request_form">Aanvraagformulier</f:translate></h3>
		</div>
		<a class="pdc-link-form pdc-link" href="{product.requestFormLinkUri}" title="{product.requestFormLinkTitle}">Naar het aanvraagformulier</a>
	</f:if>
	<f:if condition="{product.source}">
		<div class="pdc-subheader pdc-product pdc-product-detail-source">
			<h3><f:translate key="product_detail_source">Bron</f:translate></h3>
		</div>
		<a class="pdc-link-source pdc-link " href="{product.sourceLinkUri}" title="{product.sourceLinkTitle}"><f:translate key="product_detail_view_source">Bekijk bron</f:translate></a>
	</f:if>
	<f:if condition="{product.relatedRegulatory}">
		<div class="pdc-subheader pdc-product pdc-product-detail-source">
			<h3><f:translate key="product_detail_related_regulatory">Wettelijke grondslag</f:translate></h3>
		</div>
		<a class="pdc-link-regulatory pdc-link" href="{product.relatedRegulatoryLinkUri}" title="{product.relatedRegulatoryLinkTitle}">Bekijk wettelijke grondslag</a>
	</f:if>
</lib:tabControl.tab>
<lib:tabControl.tab condition="{userAuthorisedAndLoggedIn}" label="KCC">
	<h2 class="pdc-subheader pdc-product pdc-detail-internal">KCC</h2>
	<f:if condition="{product.referenceInternal}">
		<div class="pdc-subheader pdc-product pdc-detail-internal">
			<h3><f:translate key="product_detail_references">Verwijzingen</f:translate></h3>
		</div>
		<ul class="pdc-content pdc-product pdc-product-detail-internal">
			<f:for each="{product.referenceInternal}" as="referenceLink">
				<f:if condition="{referenceLink.isValid}">
					<li><a class="pdc-link-law pdc-link" href="{referenceLink.linkUri}" title="{referenceLink.title}">{referenceLink.name}</a></li>
				</f:if>
			</f:for>
		</ul>
	</f:if>
	<ul>
		<h3><f:translate key="product_detail_tips">Gebruikersnotities</f:translate></h3>
		<f:if condition="{product.tips}">
			<f:for each="{product.tips}" as="tip">
				<li>
					<f:format.date format="d-m-Y H:i">{tip.tstamp}</f:format.date> <f:translate key="product_detail_by">door</f:translate> {tip.creatorName}<br />
					{tip.name}<br />
					{tip.description}<br />
					<f:link.action action="editTip" arguments="{product: product, tip: tip}"><f:translate key="product_detail_tip_edit">Bewerk</f:translate></f:link.action>
					<f:link.action action="removeTip" arguments="{product: product, tip: tip}"><f:translate key="product_detail_tip_remove">Verwijder</f:translate></f:link.action>
				</li>
			</f:for>
		</f:if>
		<li class="new_product_tip">
			<f:link.action action="newTip" arguments="{product: product}">
				<f:translate key="product_detail_tip_new">Voeg een notitie toe</f:translate>
			</f:link.action>
		</li>
	</ul>
	<h5><f:translate key="product_detail_changes">Wijzigingen</f:translate></h5>
	<p><f:format.html>{product.changes}</f:format.html></p>
	<f:if condition="{product.responsibles}">
		<h5><f:translate key="product_detail_responsibles">Verantwoordelijken</f:translate></h5>
		<ul>
			<f:for each="{product.responsibles}" as="responsible">
				<li>
					{responsible.name}
				</li>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.authorities}">
		<h5><f:translate key="product_detail_authorities">Groepen</f:translate></h5>
		<ul>
			<f:for each="{product.authorities}" as="authority">
				<li>
					{authority.title}
				</li>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.synonyms}">
		<h5><f:translate key="product_detail_synonyms">Synoniemen</f:translate></h5>
		<ul>
			<f:for each="{product.synonyms}" as="synonym">
				<li>
					{synonym.synonym}
				</li>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.keywords}">
		<h5><f:translate key="product_detail_keywords">Kernwoorden</f:translate></h5>
		<ul>
			<f:for each="{product.keywords}" as="keyword">
				<li>
					{keyword.keyword}
				</li>
			</f:for>
		</ul>
	</f:if>
	<f:if condition="{product.directive}">
		<h5><f:translate key="product_detail_working_instructions">Werkinstructies</f:translate></h5>
		<p><a href="{product.directiveLinkUri}" title="{product.directiveLinkTitle}"><f:translate key="product_detail_viewWorkingInstructions">Bekijk werkinstructies</f:translate></a></p>
	</f:if>
	<f:if condition="{product.processDescription}">
		<h5><f:translate key="product_detail_process_description">Procesbeschrijving</f:translate></h5>
		<p><a href="{product.processDescriptionLinkUri}" title="{product.processDescriptionLinkTitle}"><f:translate key="product_detail_viewProcessDescription">Bekijk procesbeschrijving</f:translate></a></p>
	</f:if>
</lib:tabControl.tab>
</lib:tabControl>
<f:if condition="{product}">
	<div class="pdc-footer pdc-product pdc-product-detail-modified">
		<span class="pdc-footer-date pdc-faq"><f:translate key="product_detail_modified">Bijgewerkt</f:translate>: <f:format.date format="d-m-Y">{product.owmsCoreModified}</f:format.date></span>
	</div>
</f:if>
<script type="text/javascript">
	//<!-- <![CDATA[
	jQuery(document).ready(function(){
		if (jQuery('.content').find('.aplus-link-back').length == 0) {
			// only send when we are viewing static page
			var referrer = getReferrer();
			if(referrer != '') {
				referrer = '&tx_ncgovpdcaplus_pi[referrer]=' + encodeURIComponent(referrer);
			}
			jQuery.ajax({
				url: ']]>{settings.loketStatisticsPageUrl}<![CDATA[?type=1023&tx_ncgovpdcaplus_pi[id]=]]>{product.owmsCoreIdentifier}<![CDATA[&tx_ncgovpdcaplus_pi[contentType]=product' + referrer,
				cache: false
			});
		}
	});
	//]]> -->
</script>
</f:then>
<f:else><h1><f:translate key="product_detail_product_not_found">Product niet gevonden</f:translate></h1></f:else>
</f:if>